#!/bin/bash

ask_password() {
    password=$(zenity --password --title="Solucionar Errores en Deeppin 23" --text="Por favor, ingresa tu contrase침a de sudo:")
    if [ $? -ne 0 ]; then
        echo "Cancelado por el usuario"
        exit 1
    fi
}

if ! command -v zenity &> /dev/null; then
    echo "Zenity no est치 instalado. Inst치lalo para continuar."
    exit 1
fi

ask_password

distribucion=$(lsb_release -s --d)

script_path="/usr/bin/webapps-creator-ui/webapps-creator-ui.py"

if [[ "$distribucion" == "Deepin 23" ]]; then
    echo "Asignando soluci칩n para Deepin 23"
    echo "$password" | sudo -S sed -i 's/config\.write(desktop_file)/config\.write(desktop_file, space_around_delimiters=False)/' "$script_path"
fi

python3 "$script_path"

exit 0
